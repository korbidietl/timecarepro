<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arbeitsstunden Bearbeiten</title>
    <link rel="stylesheet" href="../static/styles.css">
</head>
<body>
    <!-- Menüleiste einbinden -->
    {% include 'FAN020_navbar.html' %}

    <div class="registration-form">
        <h2>Zeiteintrag bearbeiten</h2>
        <form action="/delete_time_entry_fv" method="post">
            <div class="form-row">
                <div class="form-group">
                    <label for="datum">Datum:</label>
                    <input type="date" id="datum" name="datum" value="{{datum}}" required>
                </div>
                <div class="form-group">
                    <label for="startZeit">Startzeitpunkt:</label>
                    <input type="time" id="startZeit" name="startZeit" value="{{von}}" required>
                </div>
                <div class="form-group">
                    <label for="endZeit">Endzeitpunkt:</label>
                    <input type="time" id="endZeit" name="endZeit" value="{{bis}}" required>
                </div>
                <div class="form-group">
                    <label for="fachkraft">Fachkraft:</label>
                    <input type="checkbox" id="fachkraft" name="fachkraft" {% if zeiteintrag[7] %} checked {% endif %}>
                </div>
                <div class="form-group">
                    <label for="klient">Klient:</label>
                    <select id="klient" name="klient">
                        {% for klient in klienten %}
                        <option value="{{ klient.id }}">{{ klient.nachname }}</option>
                        {% endfor %}
                    </select>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label for="beschreibung">Beschreibung:</label>
                    <input type="text" id="beschreibung" name="beschreibung" value="{{zeiteintrag[8] if zeiteintrag[8] else ''}}"  >
                </div>
                <div class="form-group">
                    <label for="interneNotiz">Interne Notiz:</label>
                    <input type="text" id="interneNotiz" name="interneNotiz"value="{{zeiteintrag[9] if zeiteintrag[9] else ''}}" >
                </div>
                <div class="form-group">
                    <label for="absage">Absage:</label>
                    <input type="checkbox" id="absage" name="absage"{% if zeiteintrag[11] %} checked {% endif %}>
                </div>
            </div>
            <h3>Fahrten:</h3>
            {% set index = 0 %}
            {% for fahrt in fahrten %}
            <div id="fahrtenContainer">
                <!-- Ursprüngliche Fahrt-Eingabezeile -->
                <div class="form-row fahrt-row">
                    <div class="form-hidden">
                        <input type="hidden" id="fahrt_id0" name="fahrt_id0">
                    </div>
                    <div class="form-group">
                        <label for="abrechenbarkeit{{ index }}">Abrechenbarkeit:</label>
                        <input type="checkbox" id="abrechenbarkeit{{ index }}" name="abrechenbarkeit{{ index }}" {% if fahrt[4] %} checked {% endif %}required>
                    </div>
                    <div class="form-group">
                        <label for="start_adresse{{ index }}">Start Adresse:</label>
                        <input type="text" id="start_adresse{{ index }}" name="start_adresse{{ index }}" value="{{ fahrt[2] }}" required>
                    </div>
                    <div class="form-group">
                        <label for="end_adresse{{ index }}">End Adresse:</label>
                        <input type="text" id="end_adresse{{ index }}" name="end_adresse{{ index }}" value="{{ fahrt[3] }}" required>
                    </div>
                    <div class="form-group">
                        <label for="kilometer{{ index }}">Kilometer:</label>
                        <input type="text" id="kilometer{{ index }}" name="kilometer{{ index }}" value="{{ fahrt[1] }}" required>
                    </div>
                    <button type="button" onclick="addFahrt()">+</button>
                    <button type="button" onclick="removeFahrt(this)">-</button>
                    <input type="hidden" id="fahrtCounterInput" name="fahrtCounterInput">
                </div>
            </div>
            {% set index = index + 1 %}
            {% endfor %}

            <div class="form-actions">
                <div class="form-group">
                    <label>Unterschrift Klient:</label>
                    <button type="button" onclick="window.location='/FS020_sign_capture.html';">Unterschrift Klient</button>
                </div>
                <div class="form-group">
                    <label>Unterschrift Mitarbeiter:</label>
                    <button type="button" onclick="window.location='/FS020_sign_capture.html';">Unterschrift Mitarbeiter</button>
                </div>
            </div>
            <div class="form-actions">
                <button type="submit">Bestätigen</button>
                <button type="button" onclick="window.location='/FMOF010';">Abbrechen</button>
            </div>
        </form>
    </div>
</body>
</html>


